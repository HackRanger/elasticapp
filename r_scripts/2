Sys.setlocale("LC_TIME", "C");
library(lubridate);
library(TTR);
BASE = '/Users/subramanya/Documents/workspace/elasticapps/logs/'
billing_header = c("UnixTimeStamp","DateTime","ActiveSessions","VmDemand","VmActive","VmBilled");
vm_demand_available_billing = read.csv(paste(BASE,"demand_available_billing_dataset.csv", sep=""),  sep="," , header=F);
colnames(vm_demand_available_billing)  <- billing_header
vm_demand_available_billing$StampToPosxTime = as.POSIXct(vm_demand_available_billing$UnixTimeStamp, origin="1970-01-01")
library(zoo)
tsdata.userrequest = zoo(vm_demand_available_billing$ActiveSessions,vm_demand_available_billing$StampToPosxTime)
tsdata.vmdemand = zoo(vm_demand_available_billing$VmDemand,vm_demand_available_billing$StampToPosxTime)
tsdata.vmactive = zoo(vm_demand_available_billing$VmActive,vm_demand_available_billing$StampToPosxTime)
tsdata.vmbilling = zoo(vm_demand_available_billing$VmBilling,vm_demand_available_billing$StampToPosxTime)
tsdata.merged = merge(ts_user_request,ts_vm_demand,ts_vm_active,ts_vm_billing,ts_vm_demand *120,ts_vm_active*120,ts_vm_billing*120)




# Plots:
tiff('userrequest.tiff',res=200)
plot(tsdata.userrequest, screens=1, lty=lty, main="Workload", xlab="Time", ylab="Number of user requests")
dev.off()
